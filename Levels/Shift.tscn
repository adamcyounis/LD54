[gd_scene load_steps=13 format=3 uid="uid://b0rp8q05ixdhq"]

[ext_resource type="Script" path="res://Scripts/Parallax.gd" id="1_gbh2m"]
[ext_resource type="Texture2D" uid="uid://dj3t5ycjj7851" path="res://Sprites/Level Designs/Level 7 - Shift/Level 7 - Shift_background.png" id="2_d8jgr"]
[ext_resource type="Texture2D" uid="uid://bb3guj7qmkw5y" path="res://Sprites/Level Designs/Level 7 - Shift/Level 7 - Shift_text.png" id="4_g84eq"]
[ext_resource type="Texture2D" uid="uid://fhrg43ttrai8" path="res://Sprites/Level Designs/Level 7 - Shift/Level 7 - Shift_midground.png" id="4_w07bv"]
[ext_resource type="Texture2D" uid="uid://b2xo3fyvpwi5p" path="res://Sprites/Level Designs/Level 7 - Shift/Level 7 - Shift_foreground.png" id="6_8a0do"]
[ext_resource type="PackedScene" uid="uid://idxyan3q5dh5" path="res://Player.tscn" id="7_27rx5"]
[ext_resource type="Script" path="res://Scripts/Follow.gd" id="8_sxkvm"]
[ext_resource type="PackedScene" uid="uid://cubtkptyfpv0n" path="res://door.tscn" id="9_ckn4e"]
[ext_resource type="PackedScene" uid="uid://cf3qux07c8hyr" path="res://Levels/Levator.tscn" id="10_u1tdl"]
[ext_resource type="PackedScene" uid="uid://dfla4tmti84gt" path="res://chalice.tscn" id="11_2sjgb"]
[ext_resource type="Script" path="res://Levels/CutsceneTrigger.gd" id="11_mwnmw"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gorgf"]
size = Vector2(2, 20)

[node name="Seance" type="Node2D"]

[node name="Environment" type="Node2D" parent="."]

[node name="Parallax Layers" type="Node2D" parent="Environment"]

[node name="Back" type="Node2D" parent="Environment/Parallax Layers"]
position = Vector2(1, 0)
script = ExtResource("1_gbh2m")
parallax = Vector2(0.5, 0.5)

[node name="Level2Background" type="Sprite2D" parent="Environment/Parallax Layers/Back"]
z_index = -2
texture = ExtResource("2_d8jgr")

[node name="Mid" type="Node2D" parent="Environment/Parallax Layers"]
script = ExtResource("1_gbh2m")
parallax = Vector2(0, 0)

[node name="Mid Body" type="StaticBody2D" parent="Environment/Parallax Layers/Mid"]

[node name="@CollisionPolygon2D@524504" type="CollisionPolygon2D" parent="Environment/Parallax Layers/Mid/Mid Body"]
position = Vector2(-320, -320)
polygon = PackedVector2Array(0, 368, 81, 368, 81, 365, 82, 365, 82, 363, 83, 363, 83, 362, 84, 362, 84, 361, 86, 361, 86, 360, 179, 360, 179, 361, 198, 361, 198, 360, 214, 360, 214, 361, 226, 361, 226, 360, 247, 360, 247, 341, 249, 341, 249, 340, 251, 340, 251, 341, 261, 341, 261, 342, 287, 342, 287, 341, 300, 341, 300, 340, 308, 340, 308, 345, 309, 345, 309, 346, 315, 346, 315, 333, 310, 333, 310, 332, 309, 332, 309, 321, 271, 321, 271, 308, 272, 308, 272, 307, 273, 307, 273, 306, 274, 306, 274, 305, 275, 305, 275, 304, 276, 304, 276, 303, 277, 303, 277, 302, 278, 302, 278, 299, 279, 299, 279, 297, 280, 297, 280, 293, 281, 293, 281, 285, 350, 285, 350, 286, 368, 286, 368, 287, 376, 287, 376, 288, 378, 288, 378, 289, 379, 289, 379, 290, 380, 290, 380, 291, 381, 291, 381, 292, 382, 292, 382, 293, 383, 293, 383, 299, 382, 299, 382, 306, 383, 306, 383, 318, 371, 318, 371, 319, 340, 319, 340, 330, 339, 330, 339, 332, 338, 332, 338, 333, 332, 333, 332, 346, 338, 346, 338, 345, 339, 345, 339, 340, 371, 340, 371, 341, 388, 341, 388, 342, 390, 342, 390, 343, 394, 343, 394, 360, 445, 360, 445, 361, 474, 361, 474, 362, 481, 362, 481, 363, 494, 363, 494, 364, 559, 364, 559, 365, 609, 365, 609, 366, 640, 366, 640, 0, 0, 0)

[node name="@CollisionPolygon2D@524505" type="CollisionPolygon2D" parent="Environment/Parallax Layers/Mid/Mid Body"]
position = Vector2(-320, -320)
polygon = PackedVector2Array(0, 640, 640, 640, 640, 390, 0, 390)

[node name="Level2Midground" type="Sprite2D" parent="Environment/Parallax Layers/Mid"]
texture = ExtResource("4_w07bv")

[node name="Fore" type="Node2D" parent="Environment/Parallax Layers"]
script = ExtResource("1_gbh2m")
parallax = Vector2(-1, -1)

[node name="Fore Body" type="StaticBody2D" parent="Environment/Parallax Layers/Fore"]

[node name="@CollisionPolygon2D@531329" type="CollisionPolygon2D" parent="Environment/Parallax Layers/Fore/Fore Body"]
position = Vector2(-320, -320)
polygon = PackedVector2Array(0, 273, 1, 273, 1, 271, 2, 271, 2, 268, 3, 268, 3, 265, 4, 265, 4, 263, 5, 263, 5, 261, 6, 261, 6, 259, 7, 259, 7, 258, 8, 258, 8, 256, 9, 256, 9, 254, 10, 254, 10, 253, 11, 253, 11, 252, 12, 252, 12, 250, 13, 250, 13, 249, 14, 249, 14, 248, 15, 248, 15, 246, 16, 246, 16, 245, 17, 245, 17, 244, 18, 244, 18, 243, 19, 243, 19, 242, 20, 242, 20, 241, 21, 241, 21, 240, 22, 240, 22, 239, 23, 239, 23, 238, 25, 238, 25, 237, 27, 237, 27, 236, 28, 236, 28, 235, 30, 235, 30, 234, 32, 234, 32, 233, 34, 233, 34, 232, 36, 232, 36, 231, 37, 231, 37, 230, 39, 230, 39, 229, 41, 229, 41, 228, 43, 228, 43, 227, 45, 227, 45, 226, 47, 226, 47, 225, 49, 225, 49, 224, 77, 224, 77, 225, 79, 225, 79, 226, 81, 226, 81, 227, 83, 227, 83, 228, 85, 228, 85, 229, 87, 229, 87, 230, 89, 230, 89, 231, 90, 231, 90, 232, 92, 232, 92, 233, 94, 233, 94, 234, 96, 234, 96, 235, 98, 235, 98, 236, 99, 236, 99, 237, 101, 237, 101, 238, 103, 238, 103, 239, 104, 239, 104, 240, 105, 240, 105, 241, 106, 241, 106, 242, 107, 242, 107, 243, 108, 243, 108, 244, 109, 244, 109, 245, 110, 245, 110, 246, 111, 246, 111, 248, 112, 248, 112, 249, 113, 249, 113, 250, 114, 250, 114, 252, 115, 252, 115, 253, 116, 253, 116, 254, 117, 254, 117, 256, 118, 256, 118, 258, 119, 258, 119, 259, 120, 259, 120, 261, 121, 261, 121, 263, 122, 263, 122, 265, 123, 265, 123, 268, 124, 268, 124, 271, 125, 271, 125, 273, 126, 273, 126, 276, 127, 276, 127, 280, 128, 280, 128, 285, 129, 285, 129, 290, 126, 290, 126, 291, 125, 291, 125, 292, 124, 292, 124, 296, 125, 296, 125, 297, 126, 297, 126, 298, 132, 298, 132, 311, 130, 311, 130, 312, 126, 312, 126, 317, 127, 317, 127, 318, 128, 318, 128, 319, 129, 319, 129, 321, 130, 321, 130, 322, 131, 322, 131, 324, 132, 324, 132, 327, 133, 327, 133, 331, 134, 331, 134, 332, 137, 332, 137, 331, 138, 331, 138, 327, 139, 327, 139, 323, 140, 323, 140, 320, 141, 320, 141, 319, 142, 319, 142, 318, 143, 318, 143, 317, 144, 317, 144, 315, 145, 315, 145, 314, 146, 314, 146, 311, 139, 311, 139, 298, 146, 298, 146, 297, 149, 297, 149, 296, 150, 296, 150, 293, 149, 293, 149, 292, 148, 292, 148, 291, 147, 291, 147, 290, 143, 290, 143, 289, 142, 289, 142, 284, 143, 284, 143, 274, 144, 274, 144, 269, 145, 269, 145, 266, 146, 266, 146, 263, 147, 263, 147, 261, 148, 261, 148, 259, 149, 259, 149, 257, 150, 257, 150, 255, 151, 255, 151, 254, 152, 254, 152, 253, 153, 253, 153, 251, 154, 251, 154, 250, 155, 250, 155, 249, 156, 249, 156, 248, 157, 248, 157, 247, 158, 247, 158, 246, 159, 246, 159, 245, 161, 245, 161, 244, 162, 244, 162, 243, 163, 243, 163, 242, 164, 242, 164, 241, 166, 241, 166, 240, 167, 240, 167, 239, 168, 239, 168, 238, 170, 238, 170, 237, 171, 237, 171, 236, 173, 236, 173, 235, 174, 235, 174, 234, 176, 234, 176, 233, 178, 233, 178, 232, 179, 232, 179, 231, 180, 231, 180, 230, 182, 230, 182, 229, 183, 229, 183, 228, 185, 228, 185, 227, 187, 227, 187, 226, 188, 226, 188, 225, 190, 225, 190, 224, 192, 224, 192, 225, 194, 225, 194, 226, 195, 226, 195, 227, 197, 227, 197, 228, 199, 228, 199, 229, 200, 229, 200, 230, 202, 230, 202, 231, 203, 231, 203, 232, 204, 232, 204, 233, 206, 233, 206, 234, 208, 234, 208, 235, 209, 235, 209, 236, 211, 236, 211, 237, 212, 237, 212, 238, 214, 238, 214, 239, 215, 239, 215, 240, 216, 240, 216, 241, 218, 241, 218, 242, 219, 242, 219, 243, 220, 243, 220, 244, 221, 244, 221, 245, 223, 245, 223, 246, 224, 246, 224, 247, 225, 247, 225, 248, 226, 248, 226, 249, 227, 249, 227, 250, 228, 250, 228, 251, 229, 251, 229, 253, 230, 253, 230, 254, 231, 254, 231, 255, 232, 255, 232, 257, 233, 257, 233, 259, 234, 259, 234, 261, 235, 261, 235, 263, 236, 263, 236, 266, 237, 266, 237, 269, 238, 269, 238, 274, 239, 274, 239, 284, 240, 284, 240, 289, 239, 289, 239, 290, 235, 290, 235, 291, 234, 291, 234, 292, 233, 292, 233, 293, 232, 293, 232, 296, 233, 296, 233, 297, 236, 297, 236, 298, 243, 298, 243, 311, 236, 311, 236, 314, 237, 314, 237, 315, 238, 315, 238, 317, 239, 317, 239, 318, 240, 318, 240, 319, 241, 319, 241, 320, 242, 320, 242, 323, 243, 323, 243, 327, 244, 327, 244, 331, 245, 331, 245, 332, 248, 332, 248, 331, 249, 331, 249, 327, 250, 327, 250, 324, 251, 324, 251, 322, 252, 322, 252, 321, 253, 321, 253, 319, 254, 319, 254, 318, 255, 318, 255, 317, 256, 317, 256, 312, 252, 312, 252, 311, 250, 311, 250, 298, 256, 298, 256, 297, 257, 297, 257, 296, 258, 296, 258, 292, 257, 292, 257, 291, 256, 291, 256, 290, 253, 290, 253, 285, 254, 285, 254, 280, 255, 280, 255, 276, 256, 276, 256, 273, 257, 273, 257, 271, 258, 271, 258, 268, 259, 268, 259, 265, 260, 265, 260, 263, 261, 263, 261, 261, 262, 261, 262, 259, 263, 259, 263, 258, 264, 258, 264, 256, 265, 256, 265, 254, 266, 254, 266, 253, 267, 253, 267, 252, 268, 252, 268, 250, 269, 250, 269, 249, 270, 249, 270, 248, 271, 248, 271, 246, 272, 246, 272, 245, 273, 245, 273, 244, 274, 244, 274, 243, 275, 243, 275, 242, 276, 242, 276, 241, 277, 241, 277, 240, 278, 240, 278, 239, 279, 239, 279, 238, 281, 238, 281, 237, 283, 237, 283, 236, 284, 236, 284, 235, 286, 235, 286, 234, 288, 234, 288, 233, 290, 233, 290, 232, 292, 232, 292, 231, 293, 231, 293, 230, 295, 230, 295, 229, 297, 229, 297, 228, 299, 228, 299, 227, 301, 227, 301, 226, 303, 226, 303, 225, 305, 225, 305, 224, 333, 224, 333, 225, 335, 225, 335, 226, 337, 226, 337, 227, 339, 227, 339, 228, 341, 228, 341, 229, 343, 229, 343, 230, 345, 230, 345, 231, 346, 231, 346, 232, 348, 232, 348, 233, 350, 233, 350, 234, 352, 234, 352, 235, 354, 235, 354, 236, 355, 236, 355, 237, 357, 237, 357, 238, 359, 238, 359, 239, 360, 239, 360, 240, 361, 240, 361, 241, 362, 241, 362, 242, 363, 242, 363, 243, 364, 243, 364, 244, 365, 244, 365, 245, 366, 245, 366, 246, 367, 246, 367, 248, 368, 248, 368, 249, 369, 249, 369, 250, 370, 250, 370, 252, 371, 252, 371, 253, 372, 253, 372, 254, 373, 254, 373, 256, 374, 256, 374, 258, 375, 258, 375, 259, 376, 259, 376, 261, 377, 261, 377, 263, 378, 263, 378, 265, 379, 265, 379, 268, 380, 268, 380, 271, 381, 271, 381, 273, 382, 273, 382, 276, 383, 276, 383, 280, 384, 280, 384, 285, 385, 285, 385, 290, 382, 290, 382, 291, 381, 291, 381, 292, 380, 292, 380, 296, 381, 296, 381, 297, 382, 297, 382, 298, 388, 298, 388, 311, 386, 311, 386, 312, 382, 312, 382, 317, 383, 317, 383, 318, 384, 318, 384, 319, 385, 319, 385, 321, 386, 321, 386, 322, 387, 322, 387, 324, 388, 324, 388, 327, 389, 327, 389, 331, 390, 331, 390, 332, 393, 332, 393, 331, 394, 331, 394, 327, 395, 327, 395, 323, 396, 323, 396, 320, 397, 320, 397, 319, 398, 319, 398, 318, 399, 318, 399, 317, 400, 317, 400, 315, 401, 315, 401, 314, 402, 314, 402, 311, 395, 311, 395, 298, 402, 298, 402, 297, 405, 297, 405, 296, 406, 296, 406, 293, 405, 293, 405, 292, 404, 292, 404, 291, 403, 291, 403, 290, 399, 290, 399, 289, 398, 289, 398, 284, 399, 284, 399, 274, 400, 274, 400, 269, 401, 269, 401, 266, 402, 266, 402, 263, 403, 263, 403, 261, 404, 261, 404, 259, 405, 259, 405, 257, 406, 257, 406, 255, 407, 255, 407, 254, 408, 254, 408, 253, 409, 253, 409, 251, 410, 251, 410, 250, 411, 250, 411, 249, 412, 249, 412, 248, 413, 248, 413, 247, 414, 247, 414, 246, 415, 246, 415, 245, 417, 245, 417, 244, 418, 244, 418, 243, 419, 243, 419, 242, 420, 242, 420, 241, 422, 241, 422, 240, 423, 240, 423, 239, 424, 239, 424, 238, 426, 238, 426, 237, 427, 237, 427, 236, 429, 236, 429, 235, 430, 235, 430, 234, 432, 234, 432, 233, 434, 233, 434, 232, 435, 232, 435, 231, 436, 231, 436, 230, 438, 230, 438, 229, 439, 229, 439, 228, 441, 228, 441, 227, 443, 227, 443, 226, 444, 226, 444, 225, 446, 225, 446, 224, 448, 224, 448, 223, 450, 223, 450, 224, 452, 224, 452, 225, 454, 225, 454, 226, 455, 226, 455, 227, 457, 227, 457, 228, 459, 228, 459, 229, 460, 229, 460, 230, 462, 230, 462, 231, 463, 231, 463, 232, 464, 232, 464, 233, 466, 233, 466, 234, 468, 234, 468, 235, 469, 235, 469, 236, 471, 236, 471, 237, 472, 237, 472, 238, 474, 238, 474, 239, 475, 239, 475, 240, 476, 240, 476, 241, 478, 241, 478, 242, 479, 242, 479, 243, 480, 243, 480, 244, 481, 244, 481, 245, 483, 245, 483, 246, 484, 246, 484, 247, 485, 247, 485, 248, 486, 248, 486, 249, 487, 249, 487, 250, 488, 250, 488, 251, 489, 251, 489, 253, 490, 253, 490, 254, 491, 254, 491, 255, 492, 255, 492, 257, 493, 257, 493, 259, 494, 259, 494, 261, 495, 261, 495, 263, 496, 263, 496, 266, 497, 266, 497, 269, 498, 269, 498, 274, 499, 274, 499, 284, 500, 284, 500, 289, 499, 289, 499, 290, 495, 290, 495, 291, 494, 291, 494, 292, 493, 292, 493, 293, 492, 293, 492, 296, 493, 296, 493, 297, 496, 297, 496, 298, 503, 298, 503, 311, 496, 311, 496, 314, 497, 314, 497, 315, 498, 315, 498, 317, 499, 317, 499, 318, 500, 318, 500, 319, 501, 319, 501, 320, 502, 320, 502, 323, 503, 323, 503, 327, 504, 327, 504, 331, 505, 331, 505, 332, 508, 332, 508, 331, 509, 331, 509, 327, 510, 327, 510, 324, 511, 324, 511, 322, 512, 322, 512, 321, 513, 321, 513, 319, 514, 319, 514, 318, 515, 318, 515, 317, 516, 317, 516, 312, 512, 312, 512, 311, 510, 311, 510, 298, 516, 298, 516, 297, 517, 297, 517, 296, 518, 296, 518, 292, 517, 292, 517, 291, 516, 291, 516, 290, 513, 290, 513, 285, 514, 285, 514, 280, 515, 280, 515, 276, 516, 276, 516, 273, 517, 273, 517, 271, 518, 271, 518, 268, 519, 268, 519, 265, 520, 265, 520, 263, 521, 263, 521, 261, 522, 261, 522, 259, 523, 259, 523, 258, 524, 258, 524, 256, 525, 256, 525, 254, 526, 254, 526, 253, 527, 253, 527, 252, 528, 252, 528, 250, 529, 250, 529, 249, 530, 249, 530, 248, 531, 248, 531, 246, 532, 246, 532, 245, 533, 245, 533, 244, 534, 244, 534, 243, 535, 243, 535, 242, 536, 242, 536, 241, 537, 241, 537, 240, 538, 240, 538, 239, 539, 239, 539, 238, 541, 238, 541, 237, 543, 237, 543, 236, 544, 236, 544, 235, 546, 235, 546, 234, 548, 234, 548, 233, 550, 233, 550, 232, 552, 232, 552, 231, 553, 231, 553, 230, 555, 230, 555, 229, 557, 229, 557, 228, 559, 228, 559, 227, 561, 227, 561, 226, 563, 226, 563, 225, 565, 225, 565, 224, 593, 224, 593, 225, 595, 225, 595, 226, 597, 226, 597, 227, 599, 227, 599, 228, 601, 228, 601, 229, 603, 229, 603, 230, 605, 230, 605, 231, 606, 231, 606, 232, 608, 232, 608, 233, 610, 233, 610, 234, 612, 234, 612, 235, 614, 235, 614, 236, 615, 236, 615, 237, 617, 237, 617, 238, 619, 238, 619, 239, 620, 239, 620, 240, 621, 240, 621, 241, 622, 241, 622, 242, 623, 242, 623, 243, 624, 243, 624, 244, 625, 244, 625, 245, 626, 245, 626, 246, 627, 246, 627, 248, 628, 248, 628, 249, 629, 249, 629, 250, 630, 250, 630, 252, 631, 252, 631, 253, 632, 253, 632, 254, 633, 254, 633, 256, 634, 256, 634, 258, 635, 258, 635, 259, 636, 259, 636, 261, 637, 261, 637, 263, 638, 263, 638, 265, 639, 265, 639, 0, 0, 0)

[node name="@CollisionPolygon2D@531330" type="CollisionPolygon2D" parent="Environment/Parallax Layers/Fore/Fore Body"]
position = Vector2(-320, -320)
polygon = PackedVector2Array(308, 367, 310, 367, 310, 397, 309, 397, 309, 413, 307, 413, 307, 414, 302, 414, 302, 416, 270, 416, 270, 417, 271, 417, 271, 420, 200, 420, 200, 421, 174, 421, 174, 422, 93, 422, 93, 421, 65, 421, 65, 420, 59, 420, 59, 421, 45, 421, 45, 422, 5, 422, 5, 423, 0, 423, 0, 640, 639, 640, 639, 422, 617, 422, 617, 423, 610, 423, 610, 424, 599, 424, 599, 425, 596, 425, 596, 426, 594, 426, 594, 427, 555, 427, 555, 426, 542, 426, 542, 425, 532, 425, 532, 424, 525, 424, 525, 423, 514, 423, 514, 422, 500, 422, 500, 421, 493, 421, 493, 422, 410, 422, 410, 419, 409, 419, 409, 418, 410, 418, 410, 417, 411, 417, 411, 413, 389, 413, 389, 414, 373, 414, 373, 404, 375, 404, 375, 403, 367, 403, 367, 402, 342, 402, 342, 403, 343, 403, 343, 404, 346, 404, 346, 411, 345, 411, 345, 412, 342, 412, 342, 411, 338, 411, 338, 408, 337, 408, 337, 395, 338, 395, 338, 392, 337, 392, 337, 367, 339, 367, 339, 365, 308, 365)

[node name="Level2Foreground" type="Sprite2D" parent="Environment/Parallax Layers/Fore"]
z_index = 1
texture = ExtResource("6_8a0do")

[node name="Text" type="Sprite2D" parent="Environment/Parallax Layers/Fore"]
z_index = 2
texture = ExtResource("4_g84eq")

[node name="Player" parent="." instance=ExtResource("7_27rx5")]
position = Vector2(-114, 61)

[node name="Camera2D" type="Camera2D" parent="." node_paths=PackedStringArray("target")]
script = ExtResource("8_sxkvm")
target = NodePath("../Player/StateMachine/Soul")
followSpeed = 10.0
magnitude = 0.3

[node name="Area2D" type="Area2D" parent="."]
collision_mask = 5
script = ExtResource("11_mwnmw")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
shape = SubResource("RectangleShape2D_gorgf")

[node name="Door" parent="." instance=ExtResource("9_ckn4e")]
position = Vector2(113, 55)
nextScene = ExtResource("10_u1tdl")

[node name="Chalice" parent="." instance=ExtResource("11_2sjgb")]
position = Vector2(-33, -11)

[node name="Chalice2" parent="." instance=ExtResource("11_2sjgb")]
position = Vector2(2, -12)

[node name="Chalice3" parent="." instance=ExtResource("11_2sjgb")]
position = Vector2(36, -11)

[editable path="Player"]
